# VK Career Text‑to‑Image

Генерация карьерных иллюстраций во вселенной VK на основе Stable Diffusion XL и Gradio.

## О проекте

Этот репозиторий содержит учебный проект в рамках VK Education: веб‑интерфейс, который помогает студентам и начинающим разработчикам быстро получать иллюстрации для самопрезентаций, описаний достижений и командной работы во стиле VK.

Под капотом используется модель **Stable Diffusion XL 1.0** через библиотеку **diffusers**, отдельный сервисный слой с промпт‑инжинирингом и интерфейс на **Gradio**.

## Возможности

- Три преднастроенные сцены:
  - «Самопрезентация»
  - «Профессиональное достижение»
  - «Команда VK»
  - плюс режим «Свободный текст» без ограничений по содержанию.
- Два визуальных стиля:
  - `vk_flat` — минималистичная flat‑иллюстрация в мягких фирменных сине‑фиолетовых тонах VK.
  - `neon` — тёмный фон с неоновыми сине‑фиолетовыми акцентами и кинематографичным светом.
- Автоматический перевод пользовательского текста с русского на английский (`deep-translator` + Google Translate), чтобы стабильно работать с SDXL.
- Negative prompt для карьерных сцен (отсечение животных, лишнего текста и артефактов) и свободный текст без ограничений.
- Веб‑интерфейс на Gradio:
  - выбор сцены и стиля;
  - ввод текста на русском или английском;
  - «Расширенные настройки» (число шагов и guidance scale);
  - блок примеров карьерных запросов;
  - оформление в сине‑фиолетовом неоновом стиле под VK.

## Архитектура

Проект разделён на два основных слоя:

- `service_layer.py`  
  - Инициализация пайплайна `StableDiffusionXLPipeline` (GPU/CPU, attention slicing).  
  - Словари `base_prompts` (3 карьерные сцены) и `styles` (`vk_flat`, `neon`).  
  - Функции:
    - `translate_to_english(text)` — перевод RU/EN → EN через `deep-translator`.
    - `build_scene_prompt(scene_name, user_text)` — сборка базового промпта с учётом сцены и пользовательского текста.
    - `build_prompt(base, style_key)` — добавление стилевого хвоста к базовому промпту.
    - `generate_one(...)` — вызов SDXL с поддержкой `negative_prompt`.
    - `generate_image_for_app(...)` — верхнеуровневая функция для UI (сцена, стиль, текст, шаги, guidance, негативный промпт).

- `05_gradio_app.ipynb`  
  - Веб‑приложение на `gr.Blocks`:
    - выпадающие списки сцены и стиля;
    - текстовое поле для запроса;
    - аккордеон «Расширенные настройки» (steps, guidance);
    - блок `Examples` с типовыми карьерными запросами;
    - компонент `Image` для вывода результата;
    - кастомная тема и CSS (тёмный фон, неоновый заголовок, фирменные цвета).

Такое разделение делает код удобным для повторного использования: сервисный слой можно подключить в другое приложение или вынести в отдельный сервис, не трогая UI.

## Промпт‑инжиниринг и стили

### Сцены

В `base_prompts` определены три сюжетных шаблона:

- **Самопрезентация** — разработчик на сцене тех‑мероприятия, большой экран с графиками и KPI, микрофон‑гарнитура, кликер с лазером, планшет с заметками, мягкий сине‑фиолетовый свет, без настольных ПК на сцене.  
- **Профессиональное достижение** — инженер в вечернем open‑space, два ультрашироких монитора (код и растущие метрики), уведомление об успешном релизе или прохождении тестов, трофей или сертификат, стикеры DONE, городской ночной вид из окна, LED‑подсветка и ощущение «сдачи» сложной задачи.  
- **Команда VK** — команда молодых разработчиков и аналитиков в современном офисе соцсети: общий стол с ноутбуками, доска с схемами и идеями, кофепоинт и книжная полка, стеклянная переговорка, барный стол для неформальных обсуждений, стикеры и бэйджи, элементы ЗОЖ (растения, йога‑коврик, гантели в углу) и атмосфера менторства и совместной ответственности за продукт.

Пользовательский текст (на русском или английском) аккуратно добавляется к базовому промпту, чтобы конкретизировать сцену (например, хакатон, стажировка, A/B‑тест).

### Стили

- `vk_flat`:
  - flat‑иллюстрация, чистые векторные линии, мягкие формы;
  - сине‑фиолетовая палитра, напоминающая фирменные цвета VK;
  - минималистичный, UI‑ориентированный стиль с плавными градиентами и без жёсткого контраста.
- `neon`:
  - тёмный фон с яркими синими и фиолетовыми неоновыми линиями;
  - подсветка контуров людей и объектов, отражения в стекле;
  - высокая, но не экстремальная контрастность, лёгкий киберпанк‑настрой.

### Перевод и negative prompt

- `translate_to_english` использует `deep-translator` с автоматическим определением языка и переводом в английский, поэтому текст можно вводить на русском или английском.  
- Для карьерных сцен используется `DEFAULT_NEGATIVE_PROMPT`, который убирает:
  - животных (cats, dogs и т.п.);
  - низкое качество, размытие, искажённые лица;
  - лишний текст, водяные знаки и логотипы.
- Для сцены «Свободный текст» негативный промпт по умолчанию отключён, поэтому можно экспериментировать с любыми сюжетами, в том числе с животными.

## Примеры карьерных запросов

В интерфейсе доступен блок «Примеры карьерных запросов». Примеры (на русском, с автоматическим переводом на английский):

- Самопрезентация:
  - «я выступаю на сцене хакатона со своим пет‑проектом»
  - «делаю питч про сервис рекомендаций музыки для VK»
  - «рассказываю студентам, как прошла моя стажировка во VK»

- Профессиональное достижение:
  - «я допилил важную фичу и выкатываю релиз ночью в офисе»
  - «разбираю графики A/B‑теста, который улучшил конверсию»
  - «праздную закрытие сложной задачи по оптимизации сервисов»

- Команда VK:
  - «мы с командой обсуждаем идею нового сервиса в переговорке»
  - «готовим демо к внутреннему митапу и репетируем презентацию»
  - «проводим ретро после хакатона и записываем инсайты на доске»

Эти варианты показывают типичные сценарии использования сервиса в контексте VK Education и при желании могут расширяться.

## Как запустить

### В Google Colab

1. Открыть ноутбук `05_gradio_app.ipynb` из репозитория в Colab.  
2. В меню «Среда выполнения» выбрать GPU (T4/L4/A100) или при отсутствии — CPU.  
3. Выполнить ячейки по порядку:
   - установка зависимостей (если есть соответствующая ячейка);
   - импорт и перезагрузка `service_layer`;
   - финальная ячейка с определением Gradio‑приложения и `demo.launch()`.  
4. Открыть ссылку на Gradio‑интерфейс в выводе и поэкспериментировать со сценами и стилями.

### Локально

1. Клонировать репозиторий:

